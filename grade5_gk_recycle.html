<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Skila.ai | Recycling Sorter</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #f1f5f9;
            font-family: 'Fredoka', sans-serif;
        }

        #canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .btn {
            position: absolute;
            bottom: 20px;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: none;
            font-size: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
            transition: transform 0.1s;
        }

        .btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        #btn-magnet {
            left: 30%;
            background: #ef4444;
            color: white;
        }

        #btn-fan {
            right: 30%;
            background: #3b82f6;
            color: white;
        }
    </style>
</head>

<body>
    <canvas id="canvas"></canvas>
    <button id="btn-magnet" class="btn" onmousedown="mDown()" onmouseup="mUp()">ðŸ§²</button>
    <button id="btn-fan" class="btn" onmousedown="fDown()" onmouseup="fUp()">ðŸ’¨</button>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width, height;
        let ITEMS = [];

        let MAGNET = false;
        let FAN = false;

        window.mDown = () => MAGNET = true; window.mUp = () => MAGNET = false;
        window.fDown = () => FAN = true; window.fUp = () => FAN = false;

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            // Spawner
            setInterval(spawnItem, 2000);
        }
        window.addEventListener('resize', resize);
        resize();

        function spawnItem() {
            const types = [
                { type: 'can', color: '#94a3b8', magnetic: true, light: false },
                { type: 'paper', color: '#fef3c7', magnetic: false, light: true },
                { type: 'glass', color: '#a7f3d0', magnetic: false, light: false }, // Heavy
            ];
            const t = types[Math.floor(Math.random() * types.length)];
            ITEMS.push({ x: width + 50, y: height / 2, ...t, vx: -3, vy: 0 });
        }

        function loop() {
            ctx.fillStyle = '#f1f5f9';
            ctx.fillRect(0, 0, width, height);

            // Conveyor Belt
            ctx.fillStyle = '#334155';
            ctx.fillRect(0, height / 2 + 20, width, 20);

            // Bins
            // Metal Bin (Top)
            ctx.fillStyle = '#ef4444'; ctx.fillRect(width / 2 - 100, 50, 200, 100);
            ctx.fillStyle = '#fff'; ctx.fillText("METAL CAN", width / 2 - 40, 100);

            // Paper Bin (Left Side?)
            // Just assume Fan blows them UP-LEFT
            ctx.fillStyle = '#3b82f6'; ctx.fillRect(50, height / 2 - 200, 100, 100);
            ctx.fillStyle = '#fff'; ctx.fillText("PAPER", 70, height / 2 - 150);

            // Glass/Trash drops at end (Right -> Left movement) -> Left Edge
            ctx.fillStyle = '#10b981'; ctx.fillRect(0, height / 2 + 100, 100, 100);
            ctx.fillStyle = '#fff'; ctx.fillText("GLASS", 20, height / 2 + 150);

            // Items
            for (let i = ITEMS.length - 1; i >= 0; i--) {
                let p = ITEMS[i];
                p.x += p.vx; p.y += p.vy;

                // Physics
                if (p.x > 0 && p.x < width) {
                    // On Belt approx
                    if (MAGNET && p.magnetic && p.x > width / 2 - 100 && p.x < width / 2 + 100) {
                        p.vy = -5; // Lift
                    } else if (p.y < height / 2 && !p.magnetic) {
                        p.vy += 0.2; // Gravity if in air
                    }

                    if (FAN && p.light && p.x < width * 0.7) {
                        p.vx -= 1; p.vy -= 1; // Blow away
                    }
                }

                // Ground / Belt collision
                if (p.y > height / 2 && p.x > 0) {
                    p.y = height / 2; p.vy = 0;
                }

                // Render
                ctx.fillStyle = p.color;
                if (p.type === 'can') {
                    ctx.fillRect(p.x, p.y - 20, 20, 30);
                } else if (p.type === 'paper') {
                    ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(p.x + 20, p.y - 10); ctx.lineTo(p.x + 10, p.y - 20); ctx.fill();
                } else {
                    // Glass Bottle
                    ctx.beginPath(); ctx.arc(p.x, p.y - 10, 10, 0, Math.PI * 2); ctx.fill();
                    ctx.fillRect(p.x - 5, p.y - 30, 10, 20);
                }

                // Cleanup
                if (p.x < -50 || p.y < -50) ITEMS.splice(i, 1);
            }

            // Draw Magnet
            if (MAGNET) {
                ctx.fillStyle = 'yellow'; ctx.globalAlpha = 0.3;
                ctx.beginPath(); ctx.moveTo(width / 2, 150); ctx.lineTo(width / 2 - 100, height / 2); ctx.lineTo(width / 2 + 100, height / 2); ctx.fill();
                ctx.globalAlpha = 1;
            }

            // Draw Fan (Wind)
            if (FAN) {
                ctx.fillStyle = 'cyan'; ctx.globalAlpha = 0.3;
                // blowing left
                ctx.fillRect(width / 2 + 100, height / 2 - 100, 300, 100);
                ctx.globalAlpha = 1;
            }

            requestAnimationFrame(loop);
        }
        loop();

    </script>
</body>

</html>